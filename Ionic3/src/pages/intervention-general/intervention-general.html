<ion-header class="page-header">
    <ion-navbar>
        <ion-icon name="menu" menuToggle left></ion-icon>
        <ion-title>{{'generalInformation' | translate}}
        </ion-title>
    </ion-navbar>
</ion-header>

<ion-content>
    <form novalidate [formGroup]="planForm" style="padding:0; margin-top:-3px">

        <ion-list class="list-items">

            <ion-list-header>
                {{currentInspection?.civicNumber}}{{currentInspection?.civicLetter}}, {{currentInspection?.laneName}}
            </ion-list-header>

            <ion-item *ngIf="currentInspection?.ownerName">
              <ion-label fixed>{{'owner' | translate}}</ion-label>
              <ion-input type="text" disabled value="{{currentInspection?.ownerName}}"></ion-input>
            </ion-item>

            <ion-item>
                <ion-label fixed>{{'risk' | translate}}</ion-label>
                <ion-input type="text" disabled value="{{riskLevel?.name}}"></ion-input>
            </ion-item>

            <ion-item>
                <ion-label fixed>{{'affectation' | translate}}</ion-label>
                <ion-input type="text" disabled value="{{currentInspection?.utilisationCodeDescription}}"></ion-input>
            </ion-item>

            <ion-item>
                <ion-label fixed>{{'matricule' | translate}}</ion-label>
                <ion-input type="text" disabled value="{{currentInspection?.matricule}}"></ion-input>
            </ion-item>

            <ion-item *ngIf="currentInspection?.aliasName">
                <ion-label fixed>Alias</ion-label>
                <ion-input type="text" disabled value="{{currentInspection?.aliasName}}"></ion-input>
            </ion-item>

          <ion-item *ngIf="currentInspection?.corporateName">
            <ion-label fixed>{{'corporateName' | translate}}</ion-label>
            <ion-input type="text" disabled value="{{currentInspection?.corporateName}}"></ion-input>
          </ion-item>

            <ion-item>
                <ion-label fixed>{{'lane' | translate}}</ion-label>
                <ion-input type="text" disabled value="{{currentInspection?.laneName}}"></ion-input>
            </ion-item>

          <ion-item *ngIf="!canBeEdited">
            <ion-label fixed>{{'transversal' | translate}}</ion-label>
            <ion-input type="text" disabled value="{{currentInspection?.transversalLaneName}}"></ion-input>
          </ion-item>

            <search-box *ngIf="canBeEdited"
                    description="{{'transversal' | translate}}"
                    formControlName="idLaneTransversal"
                    [displayFieldName]="'name'"
                    [disabledValue]="controller.getMainBuilding()?.idLaneTransversal"
                    [keyFieldName]="'id'"
                    [dataService]="laneService"></search-box>
        </ion-list>
    </form>
    <ion-card>
        <ion-card-header>{{statusText}}</ion-card-header>
        <div *ngIf="userAllowed">
            <div class="refuse_reason" *ngIf="currentInspection?.approbationRefusalReason">
                <ion-label>{{'reason' | translate}} :</ion-label>
                <ion-label>{{currentInspection?.approbationRefusalReason}}</ion-label>
            </div>

            <button *ngIf="canStartInspection" ion-button block color="caucaRed" class="large-button"
                    (click)="startInspection()">{{'start' | translate}}
            </button>

            <button *ngIf="canTransmitInspectionToServer" ion-button block color="caucaRed" class="large-button"
                   (click)="uploadInspectionToServer()">{{'sendToServer' | translate}}
            </button>

            <div class="inline-button" *ngIf="canRefuseInspection">
                <button ion-button color="caucaRed" (click)="refuseVisit()">{{'visitRefused' | translate}}</button>
                <button ion-button color="caucaRed" (click)="absentVisit()">{{'absence' | translate}}</button>
            </div>

            <button *ngIf="!canTransmitInspectionToServer && !canStartInspection" ion-button block
                    color="caucaRed" class="large-button" (click)="completeInspection()">{{'complete' | translate}}
            </button>
        </div>
        <div *ngIf="!userAllowed">
          <div class="refuse_reason">
              <ion-label>{{'otherUserInspection' | translate}}</ion-label>
          </div>
        </div>
    </ion-card>
</ion-content>

<ion-footer class="page-footer">
    <ion-toolbar>
    </ion-toolbar>
</ion-footer>
