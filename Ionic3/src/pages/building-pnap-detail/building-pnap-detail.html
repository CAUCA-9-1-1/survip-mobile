<ion-header class="page-header">
  <ion-navbar>
    <ion-buttons left>
      <button ion-button  icon-only (click)="onCancelEdition()">
        <ion-icon name="arrow-back"></ion-icon>
      </button>
    </ion-buttons>
    <ion-title>{{'pnapDetail' | translate}}</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>

  <ion-list [formGroup]="form" class="list-items">

    <ion-item-group>
      <ion-item-divider>{{'generalInformation' | translate}}</ion-item-divider>
      <ion-item [class.invalid]="!form.controls.idPersonRequiringAssistanceType.valid">
        <ion-label>{{'type' | translate}}</ion-label>
        <ion-select formControlName="idPersonRequiringAssistanceType" okText="Ok" cancelText="{{'cancel' | translate}}">
          <ion-option *ngFor="let t of pnapTypes | orderBy:'name'" [value]="t.id">{{t.name}}</ion-option>
        </ion-select>
      </ion-item>
      <div *ngIf="!form.controls.idPersonRequiringAssistanceType.valid" class="validation-error-text">{{'typeRequired' | translate}}</div>
      <ion-item>
        <ion-label>{{'name' | translate}}</ion-label>
        <ion-input item-end formControlName="personName" maxlength="60" type="text" placeholder="{{'name' | translate}}"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label>{{'floor' | translate}}</ion-label>
        <ion-input formControlName="floor" maxlength="3" placeholder="{{'floor' | translate}}" type="text"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label>{{'room' | translate}}</ion-label>
        <ion-input formControlName="local" maxlength="10" placeholder="{{'room' | translate}}" type="text"></ion-input>
      </ion-item>
    </ion-item-group>

    <ion-item-group>
      <ion-item-divider>{{'contact' | translate}}</ion-item-divider>
      <ion-item>
        <ion-label>{{'name' | translate}}</ion-label>
        <ion-input formControlName="contactName" maxlength="60" type="text" placeholder="{{'name' | translate}}"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label>{{'phone' | translate}}</ion-label>
        <ion-input placeholder="(xxx) xxx-xxxx" [brmasker]="{mask:'(000) 000-0000', len:14, type:'num'}" type="tel" formControlName="contactPhoneNumberMasked"></ion-input>
      </ion-item>
      <div *ngIf="!form.controls.contactPhoneNumberMasked.valid" class="validation-error-text">
        {{'ContactPhoneFormatWarning' | translate}}
      </div>
    </ion-item-group>

    <ion-item-group>
      <ion-item-divider>{{'pnapDayResident' | translate}}</ion-item-divider>
      <ion-item [class.invalid]="!form.controls.dayResidentCount.valid">
        <ion-label>{{'pnapNumber' | translate}}</ion-label>
        <ion-input type="tel" [pattern]="integerPattern" formControlName="dayResidentCount" placeholder="{{'pnapNumber' | translate}}"></ion-input>
      </ion-item>
      <div *ngIf="!form.controls.dayResidentCount.valid" class="validation-error-text">{{'pnapNumberValidationMessage' | translate}}</div>
      <ion-item>
        <ion-label>{{'approximate' | translate}}</ion-label>
        <ion-toggle formControlName="dayIsApproximate"></ion-toggle>
      </ion-item>
    </ion-item-group>

    <ion-item-group>
      <ion-item-divider>{{'pnapEveningResident' | translate}}</ion-item-divider>
      <ion-item [class.invalid]="!form.controls.eveningResidentCount.valid">
        <ion-label>{{'pnapNumber' | translate}}</ion-label>
        <ion-input type="tel" [pattern]="integerPattern" formControlName="eveningResidentCount" placeholder="{{'pnapNumber' | translate}}"></ion-input>
      </ion-item>
      <div *ngIf="!form.controls.eveningResidentCount.valid" class="validation-error-text">{{'pnapNumberValidationMessage' | translate}}</div>
      <ion-item>
        <ion-label>{{'approximate' | translate}}</ion-label>
        <ion-toggle formControlName="eveningIsApproximate"></ion-toggle>
      </ion-item>
    </ion-item-group>

    <ion-item-group>
      <ion-item-divider>{{'pnapNightResident' | translate}}</ion-item-divider>
      <ion-item [class.invalid]="!form.controls.nightResidentCount.valid">
        <ion-label>{{'pnapNumber' | translate}}</ion-label>
        <ion-input type="tel" [pattern]="integerPattern" formControlName="nightResidentCount" placeholder="{{'pnapNumber' | translate}}"></ion-input>
      </ion-item>
      <div *ngIf="!form.controls.nightResidentCount.valid" class="validation-error-text">{{'pnapNumberValidationMessage' | translate}}</div>
      <ion-item>
        <ion-label>{{'approximate' | translate}}</ion-label>
        <ion-toggle formControlName="nightIsApproximate"></ion-toggle>
      </ion-item>
    </ion-item-group>

    <ion-item-group>
      <ion-item-divider>{{'description' | translate}}</ion-item-divider>
      <ion-textarea maxlength="500" formControlName="description" placeholder="{{'description' | translate}}"></ion-textarea>
    </ion-item-group>
  </ion-list>
</ion-content>

<ion-footer class="page-footer">
  <ion-toolbar>
    <ion-buttons left>
      <button *ngIf="!isNew" ion-button  icon-start (click)="onDeletePnap()">
        <ion-icon name="trash"></ion-icon>
        {{'pnapDeleteButton' | translate}}
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>
