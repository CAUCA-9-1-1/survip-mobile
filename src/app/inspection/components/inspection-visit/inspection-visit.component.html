<ion-header class="page-header">
  <ion-toolbar color="primary">
    <ion-button fill="clear" (click)="goBack()" slot="start">
      <ion-icon name="arrow-back" slot="start" size="large" color="light"></ion-icon>
    </ion-button>
    <ion-title>{{'inspectionVisit' | translate}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list class="list-items ion-no-padding">
    <ion-list-header>{{'visitCanceled' | translate}}</ion-list-header>
    <ion-item-group>
      <ion-item-divider color="secondary">{{'visitCanceledMotive' | translate}}</ion-item-divider>
      <div *ngIf="ownerAbsent">
        <ion-item>
          <ion-label>{{'ownerAbsent' | translate}}</ion-label>
          <ion-toggle [checked]="true" [disabled]="true"></ion-toggle>
        </ion-item>
        <ion-item>
          <ion-label>{{'doorHangerLeft' | translate}}</ion-label>
          <ion-toggle [(ngModel)]="doorHangerHasBeenLeft"></ion-toggle>
        </ion-item>
      </div>

      <div *ngIf="!ownerAbsent">
        <ion-item>
          <ion-label>{{'ownerRefused' | translate}}</ion-label>
          <ion-toggle [checked]="true" [disabled]="true"></ion-toggle>      
        </ion-item>

        <ion-item lines="none">
            <ion-label>{{'visitRefusedMotive' | translate}}</ion-label>
        </ion-item>

        <ion-item class="align-row" lines="none">
          <ion-textarea [(ngModel)]="refusalReason" placeholder="Entrez la raison du refus ici." rows="5" class="refusal-reason-textarea">
          </ion-textarea>
        </ion-item>

        <ion-item lines="none">
          <ion-label>{{'doorHangerLeft' | translate}}</ion-label>
          <ion-toggle [(ngModel)]="doorHangerHasBeenLeft"></ion-toggle>
        </ion-item>
      </div>

    </ion-item-group>
    <ion-item-group>
      <ion-item-divider color="secondary">{{'visitNewSchedule' | translate}}</ion-item-divider>
      <ion-item>
        <ion-label>{{'date' | translate}}</ion-label>
        <ion-datetime displayFormat="YYYY/MM/DD" placeholder="{{'date' | translate}}" [(ngModel)]="requestedDateOfVisit" [cancelText]="cancelText" [doneText]='doneText'
          [min]="minimalNextVisitDate" [max]="maximalNextVisitDate"></ion-datetime>
      </ion-item>
    </ion-item-group>
  </ion-list>
</ion-content>

<ion-footer class="page-footer">
  <ion-toolbar color="primary">
    <ion-buttons>
      <ion-button slot="start" (click)="updateVisitRefusalReason()">
        <ion-icon name="save"></ion-icon>
        <ion-text>{{'save' | translate}}</ion-text>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>